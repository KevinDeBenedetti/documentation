---
title: Docker
description: Practical guide to Docker commands and Dockerfile examples for building applications.
navigation:
  icon: i-devicon:docker
seo:
  title: Docker
  description: Commands, best practices and examples for creating, running and maintaining Docker images and containers.
---

## Basic Commands

### Display

```bash
# Display running containers
docker ps
# Display stopped containers
docker ps -a
# Display images
docker images
# Access the terminal of a running container
docker exec -it <container_name> sh
```

### Build

```bash
# Build an image
docker build <image_name>
# Build with compose
docker compose up -d
```

### Save

```bash
# Create a backup of a container
docker save -o <save_name>.tar <image_name>
```

### Remove

```bash
# Remove a stopped container by ID
docker rm <container_id>
# Remove all stopped containers
docker rm $(docker ps -a -q)
# Remove all containers that haven't started
docker rm $(sudo docker ps -a -q -f 'status=exited')
# Remove unused image by ID
docker rmi <image_id>
# Remove all unused images (not associated with a container)
docker image prune
# Remove unused volumes
docker prune
# Remove unused networks
docker network prune
```

### Clean up

```bash
# Remove all unused objects (containers, images, volumes and networks)
docker system prune
# Remove all unused objects, including running containers
docker system prune -a
# Complete cleanup
docker system prune --volumes -a
```

### Run

```bash
# Run an image
docker run --name <container_name> <image_name>
# Run an image on a port
docker run --name <container_name> -p 3000:3000 <image_name>
```

### Load

```bash
# Load an image from a `.tar` file
docker load --input <file_name>.tar
```

## Network

Docker provides a lightweight networking system to connect containers to each other and to the host. A Docker network is defined by a "driver" (bridge, host, overlay, macvlan, none) and an IPAM configuration (subnet and gateway allocation). User-defined networks provide internal DNS allowing containers to resolve each other by name, facilitating inter-service communication.

Main drivers:

- bridge: default network for containers on the same host. Ideal for most single-host applications.
- host: removes network isolation, the container shares the host's network stack.
- overlay: used for communication between services across multiple hosts (Swarm, Kubernetes).
- macvlan: assigns MAC/IP addresses to containers on the physical network (useful for integration into existing networks).
- none: no network interface (complete isolation).

Important points:

- User-defined networks provide internal DNS and per-network isolation. Prefer them over the default bridge network if you want explicit names and segmentation.
- Avoid exposing all port bindings when two containers communicate on the same network: use the network for internal communication and only expose necessary ports externally.
- Reserving explicit subnets avoids conflicts with other networks in your infrastructure.

```bash
# Create a Docker network
docker network create --subnet 172.20.0.0/16 <network_name>
# Display networks
docker network ls
# Display network details
docker network inspect <network_name>
# Connect a network to a container
docker network connect --ip 172.20.0.5 <network_name> <container_name>
```

## Stack

Docker Stack allows you to deploy and manage multi-container applications on a Docker Swarm cluster. A stack is defined by a YAML file (similar to Docker Compose) that describes the services, networks and volumes needed. Docker Stack orchestrates deployment, scaling and service management across multiple cluster nodes.

```bash
# List services in a stack
docker stack services <stack_name>
# Display logs
docker service logs <stack_name_service> # `-f` to display logs in real time.
# Remove a stack
docker stack rm <stack_name>
```

## Examples

### Dockerfile

<!-- TODO: Update the dockerfiles -->

:::code-group

```dockerfile [Nuxt]
ARG NODE_VERSION=21.0.0

ARG PORT=3000

FROM node:${NODE_VERSION}-alpine as base

WORKDIR /app

FROM base as build

COPY package.json /app/
COPY pnpm-lock.yaml /app/

# Install pnpm
RUN npm install -g pnpm

# Install all dependencies
RUN pnpm install

ADD . /app

RUN pnpm run build

FROM base

EXPOSE $PORT

COPY --from=build /app/.output /app/.output

CMD ["node", ".output/server/index.mjs"]
```

```dockerfile [FastAPI]
FROM python:3.9

WORKDIR /app

COPY requirements.txt .

RUN pip install --no-cache-dir --upgrade -r requirements.txt

COPY . .

CMD ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "80"]
```

:::

### Docker Compose

:::code-group

```yaml [Nuxt]
volumes:
  node_modules:
services:
  development:
    build:
      context: .
      dockerfile: ./Dockerfile.dev
    ports:
      - "3000:3000"
      - "24678:24678"
    volumes:
      - .:/src
      - node_modules:/src/node_modules
```

```yaml [vue]
services:
  production:
    platform: linux/amd64 # Add this code for Apple Silicon
    build:
      context: .
    ports:
      - "3001:3000"
```

:::

---

::tip
Run the development environment

```sh
docker compose -f docker-compose.yml -f docker-compose.dev.yml up --build
```

::
