---
title: Debian
description: Configuration and hardening guide for a Debian system
navigation:
  icon: i-devicon:debian
seo:
  title: Debian - Configuration and Hardening
  description: Complete guide to configure, secure and optimize a Debian system
---

::note
**OFFICIAL DOCUMENTATION**
- [OVH Security Guide](https://help.ovhcloud.com/csm/fr-vps-security-tips?id=kb_article_view&sysparm_article=KB0047708)
- [Debian Documentation](https://www.debian.org/doc/)
::

## Initial setup

The initial system setup is crucial for your server's security and stability.

```bash
# Change the root password to improve security
# Use a strong password: 16+ characters, upper/lowercase, numbers and symbols
passwd

# Update the package lists
sudo apt update

# Upgrade all installed packages to their latest versions
sudo apt upgrade -y

# Clean up obsolete packages
sudo apt autoremove -y
sudo apt autoclean

# Reboot the system to apply kernel updates
sudo reboot
```

::tip
**Best practice**: Schedule regular updates with `cron` or enable automatic security updates using `unattended-upgrades`.
::

## SSH configuration

### Securing the SSH service

Changing the SSH port is a first useful step to reduce automated intrusion attempts.

```bash
# Edit the SSH configuration file
sudo nano /etc/ssh/sshd_config
```

### Recommended security settings

Modify the following settings in `/etc/ssh/sshd_config`:

```bash
# filepath: /etc/ssh/sshd_config

# Change the default port (choose between 49152 and 65535)
Port 54321

# Disable direct root login
PermitRootLogin no

# Use public key authentication only (recommended)
PubkeyAuthentication yes
PasswordAuthentication no

# Disable empty password authentication
PermitEmptyPasswords no

# Limit authentication attempts
MaxAuthTries 3

# Set a timeout for inactive connections
ClientAliveInterval 300
ClientAliveCountMax 2

# Use SSH protocol 2 only
Protocol 2

# Restrict access to specific users (optional)
# AllowUsers your_user
```

### Restart the SSH service

```bash
# Validate the configuration file syntax
sudo sshd -t

# Restart the SSH service to apply changes
sudo systemctl restart sshd

# Check the service status
sudo systemctl status sshd

# Test connection with the new port BEFORE closing your current session
ssh your_user@server_ip -p 54321
```

::warning
**WARNING**: Do not close your current SSH session before testing the new settings in a separate terminal. This prevents being locked out in case of misconfiguration.
::

### Firewall configuration

```bash
# Install UFW (Uncomplicated Firewall) if needed
sudo apt install ufw -y

# Allow the new SSH port
sudo ufw allow 54321/tcp

# Enable the firewall
sudo ufw enable

# Check active rules
sudo ufw status verbose
```

## Keyboard configuration

### System locales

Locale configuration determines system language and regional formats.

```bash
# Reconfigure locales
sudo dpkg-reconfigure locales
```

Recommended steps:
1. Deselect `en_US.UTF-8 UTF-8` (if not needed)
2. Select `fr_FR.UTF-8 UTF-8`
3. Set `fr_FR.UTF-8` as the default locale

### Keyboard layout

#### Install and configure

```bash
# Install keyboard configuration packages
sudo apt install keyboard-configuration console-setup -y

# Reconfigure the keyboard layout
sudo dpkg-reconfigure keyboard-configuration
```

Recommended settings:
- Keyboard model: Generic 105-key PC
- Keyboard origin: French
- Layout: French - French (variant)
- AltGr behavior key: Default

#### Configuration for KVM console

::note
**ADDITIONAL RESOURCES**
- [OVH KVM guide and French keyboard](https://libremaster.com/comment-utiliser-le-kvm-dun-vps-ovh-et-configurer-le-clavier-en-francais-sur-debian/)
- [Debian Wiki - Keyboard configuration](https://wiki.debian.org/fr/Keyboard)
::

```bash
# Configure the console for the French keyboard
sudo dpkg-reconfigure console-setup
```

Options to choose:
1. Encoding: UTF-8
2. Character set: Combined - Latin; Latin slave Cyrillic; Latin slave Greek
3. Font: Terminus (recommended for readability)
4. Font size: 16 (adjust to preference)

```bash
# Apply the configuration immediately
sudo setupcon

# Restart the keyboard setup service
sudo systemctl restart keyboard-setup

# Check active configuration
localectl status
```

### Set layout permanently

```bash
# Create or edit the local keyboard configuration file
sudo nano /etc/default/keyboard
```

Recommended content:

```ini
# filepath: /etc/default/keyboard
XKBMODEL="pc105"
XKBLAYOUT="fr"
XKBVARIANT=""
XKBOPTIONS=""
BACKSPACE="guess"
```

```bash
# Apply changes
sudo dpkg-reconfigure -phigh console-setup
```

## Additional optimizations

### Timezone

```bash
# Set the timezone
sudo timedatectl set-timezone Europe/Paris

# Verify configuration
timedatectl
```

### Create a non-root user

```bash
# Create a new user
sudo adduser your_user

# Add the user to the sudo group
sudo usermod -aG sudo your_user

# Check the user's groups
groups your_user
```

::tip
**SECURITY**: Always use a standard user account for daily operations and reserve the root account for critical administrative tasks.
::
