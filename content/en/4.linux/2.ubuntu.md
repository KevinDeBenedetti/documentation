---
title: Ubuntu
description: Complete guide to configure, secure and administer an Ubuntu server. User management, SSH, and security best practices.
navigation:
  icon: i-devicon:ubuntu
seo:
  title: Ubuntu - Configuration and Hardening Guide
  description: Comprehensive documentation to configure and secure an Ubuntu server with SSH, user management and DevOps best practices.
---

# Ubuntu ‚Äî Configuration and Hardening Guide

::callout{icon="i-heroicons-information-circle"}
üìå **TL;DR**: A complete guide to secure an Ubuntu server right after provisioning: system configuration, user management, SSH hardening and security best practices.
::

## Overview

Ubuntu is one of the most popular Linux distributions for servers, offering stability, security and a large support community. This documentation covers essential configurations to deploy and harden an Ubuntu server for production.

Whether you deploy on a VPS, a dedicated server, or in the cloud, the first hours after provisioning are critical to establish a secure baseline. Proper system configuration, strict user management and SSH hardening are the foundations of a robust infrastructure.

This guide is aimed at fullstack developers and system administrators who want to follow security best practices from the start.

## Prerequisites

- Root or sudo access to an Ubuntu server (20.04 LTS, 22.04 LTS, or later)
- Working SSH connection
- Basic Linux command-line knowledge
- Local SSH client installed (OpenSSH, PuTTY, or macOS/Linux terminal)

::callout{icon="i-heroicons-cube"}
üì¶ **Recommended versions**: Ubuntu 22.04 LTS or 24.04 LTS for long-term support and the latest security features.
::

## System Configuration

### Keyboard Layout

The keyboard layout is often incorrect on freshly provisioned servers. Ubuntu uses dpkg-reconfigure to interactively reconfigure system settings.

::steps

#### Reconfigure keyboard layout

```bash [keyboard-setup.sh]
# Launch the keyboard configuration wizard
sudo dpkg-reconfigure keyboard-configuration
```

::callout{icon="i-heroicons-information-circle"}
Select your keyboard model (usually "Generic 105-key PC"), then your layout (e.g. "French - French (AZERTY)").
::

#### Restart the service

```bash [keyboard-restart.sh]
# Apply changes without a full reboot
sudo service keyboard-setup restart
```

#### Configure system locales

```bash [locales-setup.sh]
# Set language and regional formats
sudo dpkg-reconfigure locales
```

::callout{icon="i-heroicons-light-bulb" color="blue"}
#summary
Locale recommendation

#content
Select `fr_FR.UTF-8` for French with full Unicode support, then set it as the default locale.
::

::

### System Update

The first action after provisioning should always be a full system update to patch known vulnerabilities.

::code-group

```bash [update.sh]
# Update available package lists
sudo apt update

# Upgrade all installed packages
sudo apt upgrade -y

# Clean up obsolete packages
sudo apt autoremove -y
```

```bash [full-upgrade.sh]
# Update including new kernels and system dependencies
sudo apt update
sudo apt full-upgrade -y
sudo apt autoremove -y
sudo apt autoclean

# Reboot if a new kernel was installed
sudo reboot
```

::

::callout{icon="i-heroicons-exclamation-triangle" color="amber"}
‚ö†Ô∏è **Warning**: A reboot (`reboot`) can temporarily interrupt services. Plan this during a maintenance window.
::

### Password Management

```bash [passwd.sh]
# Change the current account password
passwd

# Change another user's password (root required)
sudo passwd username
```

::callout{icon="i-heroicons-shield-check" color="amber"}
#summary
Password Security

#content
Use strong passwords (16+ characters mixing upper/lowercase, numbers and symbols). Consider using a password manager like Bitwarden or 1Password.
::

## User Management

### Principle of Least Privilege

Using root directly is dangerous. Create a user with limited sudo privileges instead.

::steps

#### Create a new user

```bash [create-user.sh]
# Create a user with a home directory
sudo adduser username

# Alternative with full options
sudo useradd -m -s /bin/bash -G sudo username
```

::callout{icon="i-heroicons-information-circle"}
üí° **Difference**: `adduser` is interactive and user-friendly; `useradd` is more direct and scriptable.
::

#### Grant sudo privileges

```bash [grant-sudo.sh]
# Add the user to the sudo group
sudo usermod -aG sudo username

# Verify group membership
groups username
```

#### Test login

```bash [test-user.sh]
# Switch to the new user
su - username

# Test sudo privileges
sudo apt update
```

#### Disable root SSH login (recommended)

Once the sudo user is created and tested:

```bash [disable-root-ssh.sh]
# Edit SSH configuration
sudo nano /etc/ssh/sshd_config

# Add or modify this line
PermitRootLogin no

# Restart SSH
sudo systemctl restart ssh
```

::

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Best Practice

#content
Disabling root SSH login forces the use of named users, improving traceability and security.
::

### External Reference

::card-group
  ::card
  ---
  title: OVH Documentation
  icon: i-heroicons-book-open
  to: https://help.ovhcloud.com/csm/fr-dedicated-servers-root-password?id=kb_article_view&sysparm_article=KB0043315#unprivileged
  target: _blank
  ---
  Complete guide on managing unprivileged users
  ::
::

## SSH Hardening

SSH (Secure Shell) is the main access vector to your server. Hardening it is **critical** to prevent intrusions.

::callout{icon="i-heroicons-exclamation-circle" color="red"}
#summary
üö® Important statistic

#content
A server with SSH on port 22 receives thousands of malicious connection attempts per day. Changing the port drastically reduces this noise.
::

### Changing the SSH Port

#### Why change the default port?

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Benefits of Changing the Port

#content
- ‚úÖ Reduces automated scan noise (bots)
- ‚úÖ Limits attack surface
- ‚úÖ Cleaner logs (fewer intrusion attempts)
- ‚úÖ Compliance with some security policies
::

::callout{icon="i-heroicons-exclamation-triangle" color="amber"}
‚ö†Ô∏è **Important**: Changing the SSH port is **not sufficient** protection by itself. It's an additional defense layer, not a replacement for strong authentication (SSH keys) and a firewall.
::

#### Configuration for Ubuntu 23.04+

Ubuntu 23.04 and later use systemd socket activation for SSH.

::steps

#### Identify the configuration file

```bash [check-ssh-socket.sh]
# Check if ssh.socket is used
systemctl status ssh.socket

# Locate the socket file
ls -la /lib/systemd/system/ssh.socket
```

#### Edit the socket configuration

```bash [edit-socket.sh]
# Open the file with nano
sudo nano /lib/systemd/system/ssh.socket
```

#### Modify the listening port

```ini [/lib/systemd/system/ssh.socket]
[Socket]
# Custom port (choose between 49152-65535 to avoid conflicts)
ListenStream=49152
Accept=no
```

::callout{icon="i-heroicons-light-bulb" color="blue"}
üí° **Port choice** : Ports 49152-65535 are dynamic/private ports rarely used by other services. Avoid common choices like 2222 or 2022.
::

#### Reload systemd configuration

```bash [reload-systemd.sh]
# Reload systemd unit files
sudo systemctl daemon-reload

# Restart the SSH service
sudo systemctl restart ssh.service

# Check status
sudo systemctl status ssh.service
```

#### Verify the new listening port

```bash [check-port.sh]
# Show listening TCP ports
sudo ss -tlnp | grep ssh

# Or with netstat
sudo netstat -tulnp | grep ssh
```

You should see:
```
LISTEN    0    128    0.0.0.0:49152    0.0.0.0:*    users:(("sshd",pid=1234,fd=3))
```

#### Configure the firewall

**Before** closing your current session, allow the new port in the firewall:

```bash [firewall-config.sh]
# Using UFW (Ubuntu Firewall)
sudo ufw allow 49152/tcp
sudo ufw delete allow 22/tcp
sudo ufw enable

# Check rules
sudo ufw status numbered
```

::callout{icon="i-heroicons-exclamation-circle" color="red"}
#summary
üö® CRITICAL - Risk of Lockout

#content
Never close your current SSH session before verifying you can connect on the new port in a **second session**. Otherwise, you may lock yourself out of the server.
::

#### Test connection on the new port

In a **new terminal** (do not close the old session):

```bash [test-connection.sh]
# Connect using the new port
ssh username@server_ip -p 49152

# With a specific SSH key
ssh -i ~/.ssh/my_key username@server_ip -p 49152
```

#### Finalize and reboot

Once the connection on the new port is verified:

```bash [reboot.sh]
# Reboot the server to validate changes
sudo reboot
```

::

### Additional SSH Configuration

Beyond changing the port, other SSH settings improve security.

#### Edit sshd_config

```bash [edit-sshd-config.sh]
sudo nano /etc/ssh/sshd_config
```

#### Recommended security settings

```bash [/etc/ssh/sshd_config]
# Disable root login
PermitRootLogin no

# Key-based authentication only (disable passwords)
PubkeyAuthentication yes
PasswordAuthentication no
PermitEmptyPasswords no

# Disable challenge-response authentication
ChallengeResponseAuthentication no

# Restrict allowed users
AllowUsers username other_user

# Connection timeouts
LoginGraceTime 30
ClientAliveInterval 300
ClientAliveCountMax 2

# Disable X11 forwarding if unused
X11Forwarding no

# Enforce SSH protocol version 2
Protocol 2

# Limit authentication attempts
MaxAuthTries 3
MaxSessions 10
```

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
‚úÖ SSH Key Authentication

#content
This is the most secure method. Generate a key pair with `ssh-keygen -t ed25519 -C "you@example.com"` and copy the public key to the server with `ssh-copy-id`.
::

#### Restart SSH after changes

```bash [restart-ssh.sh]
# Test configuration before restarting
sudo sshd -t

# If no errors, restart
sudo systemctl restart ssh
```

## Security Best Practices

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Security Best Practices

#content
- ‚úÖ **Update regularly**: `sudo apt update && sudo apt upgrade` at least weekly
- ‚úÖ **Use a firewall**: UFW or iptables to control inbound/outbound traffic
- ‚úÖ **Install Fail2Ban**: Automatically ban IPs with repeated failed attempts
- ‚úÖ **Enable unattended upgrades**: For security patches
- ‚úÖ **Monitor logs**: `/var/log/auth.log` for login attempts
- ‚úÖ **Back up regularly**: Automate backups with cron and rsync
- ‚úÖ **Use 2FA for SSH**: With Google Authenticator or Duo
::

### Install Fail2Ban

```bash [install-fail2ban.sh]
# Install Fail2Ban
sudo apt install fail2ban -y

# Copy default configuration
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local

# Edit configuration
sudo nano /etc/fail2ban/jail.local
```

Recommended SSH configuration:

```ini [/etc/fail2ban/jail.local]
[sshd]
enabled = true
port = 49152
filter = sshd
logpath = /var/log/auth.log
maxretry = 3
bantime = 3600
findtime = 600
```

```bash [restart-fail2ban.sh]
# Restart Fail2Ban
sudo systemctl restart fail2ban

# Check status
sudo fail2ban-client status sshd
```

## Pitfalls to Avoid

::callout{icon="i-heroicons-exclamation-triangle" color="red"}
#summary
Common Pitfalls

#content
- ‚ùå **Never close your SSH session** before verifying the new port in a second session
- ‚ùå **Don't forget to configure the firewall** for the new SSH port
- ‚ùå **Never disable password authentication** before testing key-based logins
- ‚ùå **Do not use reserved ports** (< 1024) without appropriate root privileges
- ‚ö†Ô∏è **Beware of overly restrictive firewall rules** that could lock you out
- ‚ö†Ô∏è **Document your configuration**: note the custom SSH port in a secure password manager
::

## Monitoring and Maintenance

### Monitor SSH connections

```bash [monitor-ssh.sh]
# Show recent successful logins
last -a

# Show recent failed login attempts
sudo grep "Failed password" /var/log/auth.log | tail -n 20

# Active SSH sessions
who

# Real-time SSH log monitoring
sudo tail -f /var/log/auth.log
```

### Automatic Updates

```bash [setup-auto-updates.sh]
# Install unattended-upgrades
sudo apt install unattended-upgrades -y

# Configure it
sudo dpkg-reconfigure unattended-upgrades

# Edit configuration
sudo nano /etc/apt/apt.conf.d/50unattended-upgrades
```

Recommended configuration:

```bash [/etc/apt/apt.conf.d/50unattended-upgrades]
Unattended-Upgrade::Allowed-Origins {
    "${distro_id}:${distro_codename}-security";
};
Unattended-Upgrade::AutoFixInterruptedDpkg "true";
Unattended-Upgrade::Remove-Unused-Dependencies "true";
Unattended-Upgrade::Automatic-Reboot "false";
```

## Additional Resources

### Official Documentation

::card-group
  ::card
  ---
  title: Ubuntu Server Guide
  icon: i-heroicons-book-open
  to: https://ubuntu.com/server/docs
  target: _blank
  ---
  Official Ubuntu Server documentation
  ::

  ::card
  ---
  title: OpenSSH Manual
  icon: i-heroicons-document-text
  to: https://www.openssh.com/manual.html
  target: _blank
  ---
  OpenSSH reference manual
  ::

  ::card
  ---
  title: OVH - VPS Security
  icon: i-heroicons-shield-check
  to: https://help.ovhcloud.com/csm/fr-vps-security-tips?id=kb_article_view&sysparm_article=KB0047708
  target: _blank
  ---
  Security tips for OVH VPS
  ::
::

### Tutorials and Guides

- [Essential Linux Commands](https://www.hostinger.fr/tutoriels/commandes-linux) - Comprehensive Linux commands guide
- [DigitalOcean Ubuntu Security](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu) - Detailed UFW setup
- [Fail2Ban Guide](https://www.fail2ban.org/wiki/index.php/Main_Page) - Official Fail2Ban documentation

### Security Tools

- **Lynis**: Security auditing tool for Unix/Linux systems
- **UFW**: Uncomplicated Firewall, a simple iptables front-end
- **Fail2Ban**: Intrusion prevention banning IPs
- **rkhunter**: Rootkit and malware scanner
- **ClamAV**: Open-source antivirus for Linux

## Post-Installation Checklist

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Post-Installation Checklist

#content
- System updated (`apt update && apt upgrade`)
- Keyboard and locales configured
- Sudo user created and tested
- Root SSH login disabled
- SSH port changed and tested
- SSH key-based authentication configured
- Password authentication for SSH disabled
- UFW firewall configured and active
- Fail2Ban installed and configured
- Unattended upgrades enabled
- Backups configured
- Log monitoring in place
- Configuration documented in a secure location
::

## Conclusion

Securing an Ubuntu server is an ongoing process that starts in the first minutes after provisioning. Following this guide will establish a solid baseline to protect against common attacks.

Remember that security is layered: no single measure is foolproof, but their combination builds strong defense. Stay vigilant, monitor your logs and keep your system up to date.
