---
title: UV
description: Gestionnaire moderne d'environnements virtuels et de dépendances Python
navigation:
  icon: i-material-icon-theme:uv
seo:
  title: UV - Gestionnaire Python moderne
  description: Guide complet pour gérer vos environnements virtuels et dépendances Python avec UV
---

[UV](https://github.com/astral-sh/uv) est un outil léger et performant conçu pour gérer les environnements virtuels Python et les dépendances de vos projets. Il offre une interface en ligne de commande intuitive pour créer et administrer des environnements `.venv` isolés, synchroniser les dépendances de manière déterministe, exécuter des commandes dans l'environnement et gérer un cache local optimisé.

Nous utilisons UV dans cette documentation et nos exemples pour garantir des environnements de développement reproductibles et simplifier les workflows courants.

## Pourquoi utiliser UV plutôt que pip seul ?

::list{type="success"}
- **Gestion automatique** : Création et administration automatiques des environnements `.venv`
- **Synchronisation déterministe** : Élimine les problèmes du type "ça marche sur ma machine"
- **Performance optimale** : Cache intégré et fonctionnement hors ligne pour des installations plus rapides
- **Interface unifiée** : Commandes consolidées (`uv venv`, `uv sync`, `uv run`, `uv cache`) qui remplacent de multiples étapes manuelles avec pip et venv
- **Vitesse exceptionnelle** : Écrit en Rust, UV est jusqu'à 10-100x plus rapide que pip
- **Compatibilité totale** : Support complet du format `pyproject.toml` et des standards Python modernes
::

## Installation d'UV

::code-group

```sh [macOS/Linux]
# Installation via curl
curl -LsSf https://astral.sh/uv/install.sh | sh

# Installation via Homebrew
brew install uv
```

```sh [Windows]
# Installation via PowerShell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# Installation via pip
pip install uv
```

```sh [Avec pip (toutes plateformes)]
pip install uv
```

::

::alert{type="info"}
Après l'installation, redémarrez votre terminal ou rechargez votre configuration shell pour que la commande `uv` soit disponible.
::

## Démarrage rapide

::code-group

```sh [Nouveau projet]
# Initialiser un nouveau projet uv
uv init --app mon-projet

# Se déplacer dans le projet
cd mon-projet

# Ajouter FastAPI comme dépendance
uv add fastapi --extra standard

# Lancer le serveur de développement FastAPI
uv run fastapi dev
```

```sh [Projet existant]
# Se déplacer dans votre projet
cd mon-projet-existant

# Créer l'environnement virtuel
uv venv

# Synchroniser les dépendances
uv sync

# Ajouter de nouvelles dépendances
uv add requests pandas
```

::

## Commandes essentielles

### Initialisation de projet

::code-group

```sh [Commandes]
# Initialiser un nouveau projet
uv init

# Initialiser avec une structure d'application
uv init --app

# Initialiser avec un nom spécifique
uv init --app mon-application

# Initialiser avec une version Python spécifique
uv init --python 3.12
```

::

### Gestion des dépendances

::code-group

```sh [Ajout de dépendances]
# Ajouter une dépendance de production
uv add <package>

# Ajouter avec une version spécifique
uv add "fastapi>=0.100.0"

# Ajouter avec des extras
uv add "fastapi[standard]"

# Ajouter une dépendance de développement
uv add <package> --dev

# Ajouter plusieurs packages en une fois
uv add requests pandas numpy
```

```sh [Suppression et mise à jour]
# Supprimer une dépendance
uv remove <package>

# Mettre à jour toutes les dépendances
uv lock --upgrade

# Mettre à jour un package spécifique
uv lock --upgrade-package <package>

# Synchroniser les dépendances depuis le fichier de verrouillage
uv sync

# Synchroniser uniquement les dépendances de production
uv sync --no-dev
```

::

### Gestion des environnements

::code-group

```sh [Création d'environnements]
# Créer un environnement virtuel
uv venv

# Créer avec une version spécifique de Python
uv venv --python 3.12

# Créer avec un chemin personnalisé
uv venv .venv

# Créer avec un nom personnalisé
uv venv mon-env
```

```sh [Activation manuelle (optionnel)]
# Sur macOS/Linux
source .venv/bin/activate

# Sur Windows (PowerShell)
.venv\Scripts\Activate.ps1

# Sur Windows (CMD)
.venv\Scripts\activate.bat
```

::

::alert{type="info"}
Avec `uv run`, l'activation manuelle de l'environnement n'est généralement pas nécessaire. UV active automatiquement l'environnement lors de l'exécution de commandes.
::

### Exécution de commandes

::code-group

```sh [Exécution dans l'environnement]
# Exécuter une commande dans l'environnement du projet
uv run <commande>

# Exécuter un script Python
uv run python script.py

# Lancer le serveur de développement FastAPI
uv run fastapi dev

# Exécuter pytest
uv run pytest

# Exécuter avec des arguments
uv run python script.py --arg1 value1
```

```sh [Exécution directe de packages]
# Exécuter un outil sans l'installer globalement
uvx black .
uvx ruff check .
uvx mypy src/

# Équivalent à npx pour Node.js
```

::

### Informations sur les packages

::code-group

```sh [Inspection]
# Afficher l'arbre des dépendances
uv tree

# Afficher l'arbre d'un package spécifique
uv tree <package>

# Lister les packages installés
uv list

# Lister avec les versions
uv list --format columns

# Afficher les informations d'un package
uv show <package>
```

```sh [Recherche]
# Rechercher un package sur PyPI
uv search <terme>

# Afficher les versions disponibles
uv show <package> --versions
```

::

### Gestion du cache

::code-group

```sh [Cache]
# Nettoyer le cache
uv cache clean

# Afficher le répertoire du cache
uv cache dir

# Afficher la taille du cache
uv cache size

# Nettoyer uniquement les packages inutilisés
uv cache prune
```

::

## Configuration du projet

Le fichier `pyproject.toml` centralise la configuration de votre projet :

::code-group

```toml [pyproject.toml complet]
[project]
name = "mon-app-fastapi"
version = "0.1.0"
description = "Application FastAPI moderne avec UV"
readme = "README.md"
requires-python = ">=3.10"
authors = [
    { name = "Votre Nom", email = "email@example.com" }
]
license = { text = "MIT" }
keywords = ["fastapi", "api", "web"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
]

dependencies = [
    "fastapi[standard]>=0.100.0",
    "uvicorn>=0.24.0",
    "pydantic>=2.0.0",
    "sqlalchemy>=2.0.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.0.0",
    "pytest-cov>=4.0.0",
    "httpx>=0.24.0",
    "black>=23.0.0",
    "ruff>=0.1.0",
    "mypy>=1.0.0",
]

[project.urls]
Homepage = "https://github.com/username/mon-app-fastapi"
Documentation = "https://mon-app-fastapi.readthedocs.io"
Repository = "https://github.com/username/mon-app-fastapi.git"
Issues = "https://github.com/username/mon-app-fastapi/issues"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv]
# Configuration spécifique à UV
dev-dependencies = [
    "pytest>=7.0.0",
    "pytest-cov>=4.0.0",
]

[tool.ruff]
line-length = 88
target-version = "py310"
select = ["E", "F", "I", "N", "W"]
ignore = ["E501"]

[tool.ruff.isort]
known-first-party = ["mon_app"]

[tool.black]
line-length = 88
target-version = ["py310", "py311", "py312"]
include = '\.pyi?$'

[tool.mypy]
python_version = "3.10"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
python_functions = ["test_*"]
addopts = "-v --cov=src --cov-report=html"
```

```toml [pyproject.toml minimal]
[project]
name = "mon-app-fastapi"
version = "0.1.0"
description = "Application FastAPI moderne"
requires-python = ">=3.10"
dependencies = [
    "fastapi[standard]>=0.100.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.0.0",
    "ruff>=0.1.0",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"
```

::

## Workflow recommandé

::steps

### Initialisation du projet

Créez un nouveau projet avec la structure appropriée :

```sh
# Initialiser le projet
uv init --app mon-projet

# Se déplacer dans le répertoire
cd mon-projet

# Vérifier la structure créée
tree -L 2
```

### Configuration de l'environnement

Configurez votre environnement virtuel :

```sh
# Créer l'environnement avec Python 3.12
uv venv --python 3.12

# Vérifier la version de Python
uv run python --version
```

### Ajout des dépendances

Installez les dépendances nécessaires :

```sh
# Dépendances de production
uv add fastapi --extra standard
uv add sqlalchemy pydantic-settings

# Dépendances de développement
uv add pytest httpx pytest-cov --dev
uv add ruff black mypy --dev
```

### Développement

Exécutez votre application dans l'environnement isolé :

```sh
# Lancer le serveur de développement
uv run fastapi dev

# Ou avec uvicorn directement
uv run uvicorn main:app --reload
```

### Formatage et linting

Assurez-vous de la qualité du code :

```sh
# Formatter avec Black
uv run black .

# Linter avec Ruff
uv run ruff check .

# Vérification des types avec mypy
uv run mypy src/
```

### Tests

Lancez vos tests avec pytest :

```sh
# Exécuter tous les tests
uv run pytest

# Avec couverture de code
uv run pytest --cov=src --cov-report=html

# Tests spécifiques
uv run pytest tests/test_api.py
```

### Synchronisation

Synchronisez votre environnement après modification des dépendances :

```sh
# Après un git pull ou modification du pyproject.toml
uv sync

# Pour mettre à jour toutes les dépendances
uv lock --upgrade
uv sync
```

::

## Bonnes pratiques

::card-group
::card{icon="i-heroicons-check-circle"}
#title
Verrouillage des versions
#description
Utilisez `uv lock` et `uv sync` pour garantir que tous les membres de l'équipe utilisent les mêmes versions de dépendances. Commitez toujours le fichier `uv.lock`.
::

::card{icon="i-heroicons-rocket-launch"}
#title
Cache optimisé
#description
Le cache local d'UV accélère considérablement les installations répétées et permet le travail hors ligne. Le cache est partagé entre tous vos projets.
::

::card{icon="i-heroicons-shield-check"}
#title
Environnements isolés
#description
Chaque projet dispose de son propre environnement `.venv`, évitant les conflits de dépendances. N'oubliez pas d'ajouter `.venv/` à votre `.gitignore`.
::

::card{icon="i-heroicons-command-line"}
#title
Interface unifiée
#description
Une seule commande `uv` pour remplacer pip, venv, pip-tools, pipx et plus encore. Simplifiez votre workflow de développement Python.
::

::card{icon="i-heroicons-document-text"}
#title
Configuration centralisée
#description
Utilisez `pyproject.toml` comme source unique de vérité pour la configuration de votre projet, incluant les dépendances et les outils de développement.
::

::card{icon="i-heroicons-arrow-path"}
#title
Mises à jour régulières
#description
Exécutez régulièrement `uv lock --upgrade` pour bénéficier des dernières corrections de bugs et améliorations de sécurité.
::
::

## Migration depuis pip/virtualenv

Si vous avez un projet existant utilisant `requirements.txt` :

::code-group

```sh [Étapes de migration]
# 1. Naviguer vers votre projet
cd mon-projet-existant

# 2. Créer un pyproject.toml de base
uv init

# 3. Importer les dépendances depuis requirements.txt
cat requirements.txt | xargs uv add

# 4. Pour les dépendances de développement
cat requirements-dev.txt | xargs uv add --dev

# 5. Créer l'environnement et synchroniser
uv venv
uv sync

# 6. Vérifier que tout fonctionne
uv run python -c "import fastapi; print(fastapi.__version__)"
```

```sh [Nettoyage]
# Une fois la migration confirmée, vous pouvez supprimer
rm requirements.txt requirements-dev.txt
rm -rf venv/  # Ancien environnement virtuel

# Mettre à jour .gitignore
echo ".venv/" >> .gitignore
echo "uv.lock" >> .gitignore  # Ne pas ignorer ! À commiter
```

::

## Comparaison avec d'autres outils

| Fonctionnalité                  | UV      | pip + venv | Poetry | PDM |
| ------------------------------- | ------- | ---------- | ------ | --- |
| Vitesse d'installation          | ⚡⚡⚡     | ⚡          | ⚡⚡     | ⚡⚡  |
| Gestion des dépendances         | ✅       | ⚠️          | ✅      | ✅   |
| Verrouillage déterministe       | ✅       | ❌          | ✅      | ✅   |
| Cache partagé                   | ✅       | ❌          | ✅      | ✅   |
| Environnements virtuels         | ✅       | ✅          | ✅      | ✅   |
| Support PEP 621                 | ✅       | ❌          | ⚠️      | ✅   |
| Installation globale de scripts | ✅ (uvx) | ❌          | ❌      | ❌   |

## Dépannage

### Problèmes courants

::accordion
  ::accordion-item
  ---
  title: "Commande 'uv' non trouvée après l'installation"
  ---
  Rechargez votre configuration shell ou redémarrez votre terminal :
  
  ```sh
  # Bash
  source ~/.bashrc
  
  # Zsh
  source ~/.zshrc
  
  # Ou redémarrez simplement votre terminal
  ```
  ::

  ::accordion-item
  ---
  title: "Conflits de dépendances"
  ---
  UV résout automatiquement les conflits, mais si vous rencontrez des problèmes :
  
  ```sh
  # Nettoyer et recréer l'environnement
  rm -rf .venv uv.lock
  uv venv
  uv sync
  ```
  ::

  ::accordion-item
  ---
  title: "Cache corrompu"
  ---
  Si vous soupçonnez un problème de cache :
  
  ```sh
  # Nettoyer complètement le cache
  uv cache clean
  
  # Puis réinstaller
  uv sync
  ```
  ::

  ::accordion-item
  ---
  title: "Version Python non trouvée"
  ---
  Installez la version Python requise :
  
  ```sh
  # Sur macOS avec Homebrew
  brew install python@3.12
  
  # Puis créez l'environnement avec cette version
  uv venv --python 3.12
  ```
  ::
::

## Ressources supplémentaires

::list{type="primary"}
- [Documentation officielle UV](https://github.com/astral-sh/uv) - Documentation complète et API de référence
- [Guide de migration depuis pip](https://github.com/astral-sh/uv#migration-guide) - Instructions détaillées pour migrer
- [Comparaison des performances](https://github.com/astral-sh/uv#benchmarks) - Benchmarks et comparaisons
- [Astral Blog](https://astral.sh/blog) - Actualités et annonces sur UV et Ruff
- [PEP 621](https://peps.python.org/pep-0621/) - Spécification du format `pyproject.toml`
::

::alert{type="success"}
UV est maintenu activement par [Astral](https://astral.sh/), l'équipe derrière Ruff, le linter Python ultra-rapide. La communauté est active et réactive sur GitHub.
::

