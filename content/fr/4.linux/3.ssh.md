---
title: SSH
description: Un guide pour configurer SSH.
navigation:
  icon: i-mdi:ssh
seo:
  title: SSH
  description: Un guide pour configurer SSH.
---

## Commandes de base

### Connexion

```shell
ssh <USERNAME>@<IP_VPS> # Standard
ssh -i ~/.ssh/<KEY_NAME>.pub <USERNAME>@<IP_VPS> # Avec la clef SSH
```

#### Avec alias

Il faut créer un alias dans le fichier de configuration `~/.ssh/config`. Il faut renseigner la clef privée.

```shell [.ssh/config]
Host <ALIAS_NAME>
    Hostname <IP_VPS>
    User <USERNAME>
    IdentityFile ~/.ssh/<KEY_NAME>
    IdentitiesOnly yes
```

```shell [Se connecter avec un alias]
ssh <ALIAS_NAME>
```

### Configurer

Détail de la commande `ssh-copy-id` pour configurer l'accès SSH au serveur :

1. Copie de la clé publique sur le serveur distant.
2. Configure automatiquement les permissions appropriées.
3. Ajoute la clé au fichier `authorized_keys` sur le serveur distant.

```shell
ssh-copy-id -i ~/.ssh/<key_name>.pub <username>@<ip_vps>
```

### Copier

```shell [Copier un fichier en ssh]
scp -r <NOM_DU_FICHIER> <username>@<ip_vps>:~/
```

```shell [Copier un fichier en ssh, sur un port personnalisé]
scp -r -P <PORT> <NOM_DU_FICHIER> <username>@<ip_vps>:~/
```

### Supprimer

```shell [Supprimer une clef SSH]
ssh-keygen -R <IP_VPS>
```

## Se connecter à un serveur

::Steps{level="3"}

### Créer une clef SSH

Créer une paire de clefs SSH sur notre machine locale.

```shell
ssh-keygen -t rsa -b 4096 -C "email@email.email" -f ~/.ssh/<key_name>
```

### Ajouter la clef SSH publique à Pulseheberg

On peut la copier avec la commande suivante.

```shell
pbcopy < ~/.ssh/<key_name>.pub
```

### Se connecter au VPS

A partir du terminal de sa machine locale, on peut se connecter au VPS avec la commande suivante.

```shell
ssh -i ~/.ssh/<key_name> root@<ip_vps>
```

::

## Gestion des clefs

Authoriser la clé dans le fichier `authorized_keys`

```shell
echo "<public_key>" >> ~/.ssh/authorized_keys
```
