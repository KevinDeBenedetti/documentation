---
title: Ubuntu - Guide de Configuration et S√©curisation
description: Guide complet pour configurer, s√©curiser et administrer un serveur Ubuntu. Gestion des utilisateurs, SSH, et bonnes pratiques de s√©curit√©.
navigation:
  icon: i-devicon:ubuntu
seo:
  title: Ubuntu - Guide de Configuration et S√©curisation
  description: Documentation compl√®te pour configurer et s√©curiser un serveur Ubuntu avec SSH, gestion des utilisateurs et bonnes pratiques DevOps.
---

# Ubuntu - Guide de Configuration et S√©curisation

::callout{icon="i-heroicons-information-circle"}
üìå **TL;DR**: Guide complet pour s√©curiser un serveur Ubuntu d√®s le provisionnement : configuration syst√®me, gestion des utilisateurs, durcissement SSH et bonnes pratiques de s√©curit√©.
::

## Vue d'ensemble

Ubuntu est l'une des distributions Linux les plus populaires pour les serveurs, offrant stabilit√©, s√©curit√© et une vaste communaut√© de support. Cette documentation couvre les configurations essentielles pour d√©ployer et s√©curiser un serveur Ubuntu en production.

Que vous d√©ployiez sur un VPS (Virtual Private Server), un serveur d√©di√©, ou dans le cloud, les premi√®res heures apr√®s le provisionnement sont critiques pour √©tablir une base s√©curis√©e. Une configuration appropri√©e du syst√®me, une gestion rigoureuse des utilisateurs et un durcissement SSH sont les fondations d'une infrastructure robuste.

Ce guide s'adresse aux d√©veloppeurs fullstack et aux administrateurs syst√®me qui souhaitent suivre les meilleures pratiques de s√©curit√© d√®s le d√©part.

## Pr√©requis

- Acc√®s root ou sudo √† un serveur Ubuntu (20.04 LTS, 22.04 LTS, ou versions ult√©rieures)
- Connexion SSH fonctionnelle
- Connaissances de base en ligne de commande Linux
- Client SSH install√© localement (OpenSSH, PuTTY, ou terminal macOS/Linux)

::callout{icon="i-heroicons-cube"}
üì¶ **Versions recommand√©es** : Ubuntu 22.04 LTS ou 24.04 LTS pour un support long terme et les derni√®res fonctionnalit√©s de s√©curit√©.
::

## Configuration du Syst√®me

### Configuration du Clavier

La disposition du clavier est souvent incorrecte sur les serveurs fra√Æchement provisionn√©s. Ubuntu utilise `dpkg-reconfigure` pour reconfigurer les param√®tres syst√®me interactivement.

::steps

#### Reconfigurer la disposition du clavier

```bash [keyboard-setup.sh]
# Lancer l'assistant de configuration du clavier
sudo dpkg-reconfigure keyboard-configuration
```

::callout{icon="i-heroicons-information-circle"}
S√©lectionnez votre mod√®le de clavier (g√©n√©ralement "Generic 105-key PC"), puis votre disposition (ex: "French - French (AZERTY)").
::

#### Red√©marrer le service

```bash [keyboard-restart.sh]
# Appliquer les changements sans red√©marrage complet
sudo service keyboard-setup restart
```

#### Configurer les locales syst√®me

```bash [locales-setup.sh]
# D√©finir la langue et les formats r√©gionaux
sudo dpkg-reconfigure locales
```

::callout{icon="i-heroicons-light-bulb" color="blue"}
#summary
Recommandation Locales

#content
S√©lectionnez `fr_FR.UTF-8` pour le fran√ßais avec support Unicode complet, puis d√©finissez-le comme locale par d√©faut.
::

::

### Mise √† Jour du Syst√®me

La premi√®re action apr√®s le provisionnement doit toujours √™tre une mise √† jour compl√®te du syst√®me pour patcher les vuln√©rabilit√©s connues.

::code-group

```bash [update.sh]
# Mettre √† jour la liste des paquets disponibles
sudo apt update

# Mettre √† niveau tous les paquets install√©s
sudo apt upgrade -y

# Nettoyer les paquets obsol√®tes
sudo apt autoremove -y
```

```bash [full-upgrade.sh]
# Mise √† jour incluant les nouveaux noyaux et d√©pendances syst√®me
sudo apt update
sudo apt full-upgrade -y
sudo apt autoremove -y
sudo apt autoclean

# Red√©marrer si un nouveau noyau a √©t√© install√©
sudo reboot
```

::

::callout{icon="i-heroicons-exclamation-triangle" color="amber"}
‚ö†Ô∏è **Attention** : Un red√©marrage (`reboot`) peut interrompre temporairement les services. Planifiez cette op√©ration pendant une fen√™tre de maintenance.
::

### Gestion des Mots de Passe

```bash [passwd.sh]
# Modifier le mot de passe du compte actuel
passwd

# Modifier le mot de passe d'un autre utilisateur (root requis)
sudo passwd nom_utilisateur
```

::callout{icon="i-heroicons-shield-check" color="amber"}
#summary
S√©curit√© des Mots de Passe

#content
Utilisez des mots de passe forts (16+ caract√®res, mixant majuscules, minuscules, chiffres et symboles). Envisagez l'utilisation d'un gestionnaire de mots de passe comme Bitwarden ou 1Password.
::

## Gestion des Utilisateurs

### Principe du Moindre Privil√®ge

L'utilisation directe du compte `root` est une pratique dangereuse. Cr√©ez plut√¥t un utilisateur avec des privil√®ges sudo limit√©s.

::steps

#### Cr√©er un nouvel utilisateur

```bash [create-user.sh]
# Cr√©er un utilisateur avec r√©pertoire home
sudo adduser nom_utilisateur

# Alternative avec options compl√®tes
sudo useradd -m -s /bin/bash -G sudo nom_utilisateur
```

::callout{icon="i-heroicons-information-circle"}
üí° **Diff√©rence** : `adduser` est interactif et plus convivial, `useradd` est plus direct et scriptable.
::

#### Accorder les privil√®ges sudo

```bash [grant-sudo.sh]
# Ajouter l'utilisateur au groupe sudo
sudo usermod -aG sudo nom_utilisateur

# V√©rifier l'appartenance aux groupes
groups nom_utilisateur
```

#### Tester la connexion

```bash [test-user.sh]
# Se connecter avec le nouvel utilisateur
su - nom_utilisateur

# Tester les privil√®ges sudo
sudo apt update
```

#### D√©sactiver le login root SSH (recommand√©)

Une fois l'utilisateur sudo cr√©√© et test√© :

```bash [disable-root-ssh.sh]
# √âditer la configuration SSH
sudo nano /etc/ssh/sshd_config

# Ajouter ou modifier cette ligne
PermitRootLogin no

# Red√©marrer SSH
sudo systemctl restart ssh
```

::

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Bonne Pratique

#content
D√©sactiver le login root SSH force l'utilisation d'utilisateurs nominatifs, am√©liorant la tra√ßabilit√© et la s√©curit√©.
::

### R√©f√©rence Externe

::card-group
  ::card
  ---
  title: Documentation OVH
  icon: i-heroicons-book-open
  to: https://help.ovhcloud.com/csm/fr-dedicated-servers-root-password?id=kb_article_view&sysparm_article=KB0043315#unprivileged
  target: _blank
  ---
  Guide complet sur la gestion des utilisateurs non-privil√©gi√©s
  ::
::

## S√©curisation SSH

SSH (Secure Shell) est le principal vecteur d'acc√®s √† votre serveur. Son durcissement est **critique** pour pr√©venir les intrusions.

::callout{icon="i-heroicons-exclamation-circle" color="red"}
#summary
üö® Statistique Importante

#content
Un serveur avec SSH sur le port 22 re√ßoit des milliers de tentatives de connexion malveillantes par jour. Changer le port r√©duit drastiquement ce bruit.
::

### Modification du Port SSH

#### Pourquoi Changer le Port par D√©faut ?

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Avantages du Changement de Port

#content
- ‚úÖ R√©duction du bruit des scans automatis√©s (bots)
- ‚úÖ Limitation de la surface d'attaque
- ‚úÖ Logs plus lisibles (moins de tentatives d'intrusion)
- ‚úÖ Conformit√© avec certaines politiques de s√©curit√©
::

::callout{icon="i-heroicons-exclamation-triangle" color="amber"}
‚ö†Ô∏è **Important** : Changer le port SSH n'est **pas une protection suffisante** √† elle seule. C'est une couche de d√©fense suppl√©mentaire, pas un remplacement pour une authentification forte (cl√©s SSH) et un firewall.
::

#### Configuration pour Ubuntu 23.04+

Ubuntu 23.04 et versions ult√©rieures utilisent `systemd socket activation` pour SSH.

::steps

#### Identifier le fichier de configuration

```bash [check-ssh-socket.sh]
# V√©rifier si ssh.socket est utilis√©
systemctl status ssh.socket

# Localiser le fichier de configuration
ls -la /lib/systemd/system/ssh.socket
```

#### √âditer la configuration socket

```bash [edit-socket.sh]
# Ouvrir le fichier avec nano
sudo nano /lib/systemd/system/ssh.socket
```

#### Modifier le port d'√©coute

```ini [/lib/systemd/system/ssh.socket]
[Socket]
# Port personnalis√© (choisir entre 49152-65535 pour √©viter les conflits)
ListenStream=49152
Accept=no
```

::callout{icon="i-heroicons-light-bulb" color="blue"}
üí° **Choix du port** : Les ports 49152-65535 sont des ports dynamiques/priv√©s rarement utilis√©s par d'autres services. √âvitez les ports communs comme 2222 ou 2022.
::

#### Recharger la configuration systemd

```bash [reload-systemd.sh]
# Recharger les fichiers de configuration systemd
sudo systemctl daemon-reload

# Red√©marrer le service SSH
sudo systemctl restart ssh.service

# V√©rifier le statut
sudo systemctl status ssh.service
```

#### V√©rifier l'√©coute du nouveau port

```bash [check-port.sh]
# Afficher les ports en √©coute
sudo ss -tlnp | grep ssh

# Ou avec netstat
sudo netstat -tulnp | grep ssh
```

Vous devriez voir :
```
LISTEN    0    128    0.0.0.0:49152    0.0.0.0:*    users:(("sshd",pid=1234,fd=3))
```

#### Configurer le firewall

**Avant** de fermer la session actuelle, configurez le firewall pour autoriser le nouveau port :

```bash [firewall-config.sh]
# Avec UFW (Ubuntu Firewall)
sudo ufw allow 49152/tcp
sudo ufw delete allow 22/tcp
sudo ufw enable

# V√©rifier les r√®gles
sudo ufw status numbered
```

::callout{icon="i-heroicons-exclamation-circle" color="red"}
#summary
üö® CRITIQUE - Risque de Blocage

#content
Ne fermez **jamais** votre session SSH actuelle avant d'avoir v√©rifi√© que vous pouvez vous connecter avec le nouveau port dans une **seconde session**. Sinon, vous risquez de vous retrouver bloqu√© hors de votre serveur.
::

#### Tester la connexion avec le nouveau port

Dans un **nouveau terminal** (sans fermer l'ancien) :

```bash [test-connection.sh]
# Se connecter avec le nouveau port
ssh nom_utilisateur@adresse_ip_serveur -p 49152

# Avec une cl√© SSH sp√©cifique
ssh -i ~/.ssh/ma_cle nom_utilisateur@adresse_ip_serveur -p 49152
```

#### Finaliser et red√©marrer

Une fois la connexion v√©rifi√©e sur le nouveau port :

```bash [reboot.sh]
# Red√©marrer le serveur pour valider les changements
sudo reboot
```

::

### Configuration SSH Additionnelle

Au-del√† du changement de port, d'autres configurations SSH renforcent la s√©curit√©.

#### √âditer sshd_config

```bash [edit-sshd-config.sh]
sudo nano /etc/ssh/sshd_config
```

#### Param√®tres de S√©curit√© Recommand√©s

```bash [/etc/ssh/sshd_config]
# D√©sactiver le login root
PermitRootLogin no

# Authentification par cl√© uniquement (d√©sactiver les mots de passe)
PubkeyAuthentication yes
PasswordAuthentication no
PermitEmptyPasswords no

# D√©sactiver l'authentification par challenge-response
ChallengeResponseAuthentication no

# Limiter les utilisateurs autoris√©s
AllowUsers nom_utilisateur autre_utilisateur

# Timeout de connexion
LoginGraceTime 30
ClientAliveInterval 300
ClientAliveCountMax 2

# D√©sactiver le X11 forwarding si non utilis√©
X11Forwarding no

# Protocole SSH version 2 uniquement
Protocol 2

# Limiter les tentatives d'authentification
MaxAuthTries 3
MaxSessions 10
```

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
‚úÖ Authentification par Cl√© SSH

#content
C'est la m√©thode la plus s√©curis√©e. G√©n√©rez une paire de cl√©s avec `ssh-keygen -t ed25519 -C "votre@email.com"` et copiez la cl√© publique sur le serveur avec `ssh-copy-id`.
::

#### Red√©marrer SSH apr√®s modifications

```bash [restart-ssh.sh]
# Tester la configuration avant de red√©marrer
sudo sshd -t

# Si aucune erreur, red√©marrer
sudo systemctl restart ssh
```

## Bonnes Pratiques de S√©curit√©

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Best Practices de S√©curit√©

#content
- ‚úÖ **Mettez √† jour r√©guli√®rement** : `sudo apt update && sudo apt upgrade` au moins hebdomadairement
- ‚úÖ **Utilisez un firewall** : UFW ou iptables pour contr√¥ler le trafic entrant/sortant
- ‚úÖ **Installez Fail2Ban** : Bannit automatiquement les IP avec trop de tentatives √©chou√©es
- ‚úÖ **Activez les mises √† jour automatiques** : Avec `unattended-upgrades` pour les patches de s√©curit√©
- ‚úÖ **Surveillez les logs** : `/var/log/auth.log` pour les tentatives de connexion
- ‚úÖ **Sauvegardez r√©guli√®rement** : Automatisez les backups avec cron et rsync
- ‚úÖ **Utilisez 2FA pour SSH** : Avec Google Authenticator ou Duo
::

### Installation de Fail2Ban

```bash [install-fail2ban.sh]
# Installer Fail2Ban
sudo apt install fail2ban -y

# Copier la configuration par d√©faut
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local

# √âditer la configuration
sudo nano /etc/fail2ban/jail.local
```

Configuration SSH recommand√©e :

```ini [/etc/fail2ban/jail.local]
[sshd]
enabled = true
port = 49152
filter = sshd
logpath = /var/log/auth.log
maxretry = 3
bantime = 3600
findtime = 600
```

```bash [restart-fail2ban.sh]
# Red√©marrer Fail2Ban
sudo systemctl restart fail2ban

# V√©rifier le statut
sudo fail2ban-client status sshd
```

## Pi√®ges √† √âviter

::callout{icon="i-heroicons-exclamation-triangle" color="red"}
#summary
Common Pitfalls

#content
- ‚ùå **Ne jamais fermer la session SSH** avant de v√©rifier le nouveau port dans une seconde session
- ‚ùå **Ne pas oublier de configurer le firewall** pour le nouveau port SSH
- ‚ùå **Ne jamais d√©sactiver l'authentification par mot de passe** avant d'avoir test√© la connexion par cl√© SSH
- ‚ùå **Ne pas utiliser des ports r√©serv√©s** (< 1024) sans privil√®ges root appropri√©s
- ‚ö†Ô∏è **Attention aux r√®gles firewall trop restrictives** qui pourraient vous bloquer l'acc√®s
- ‚ö†Ô∏è **Documenter votre configuration** : Notez le port SSH personnalis√© dans un gestionnaire de mots de passe
::

## Monitoring et Maintenance

### Surveiller les Connexions SSH

```bash [monitor-ssh.sh]
# Afficher les derni√®res connexions r√©ussies
last -a

# Afficher les tentatives de connexion √©chou√©es
sudo grep "Failed password" /var/log/auth.log | tail -n 20

# Connexions SSH actives
who

# Surveillance en temps r√©el des logs SSH
sudo tail -f /var/log/auth.log
```

### Mises √† Jour Automatiques

```bash [setup-auto-updates.sh]
# Installer unattended-upgrades
sudo apt install unattended-upgrades -y

# Configurer
sudo dpkg-reconfigure unattended-upgrades

# √âditer la configuration
sudo nano /etc/apt/apt.conf.d/50unattended-upgrades
```

Configuration recommand√©e :

```bash [/etc/apt/apt.conf.d/50unattended-upgrades]
Unattended-Upgrade::Allowed-Origins {
    "${distro_id}:${distro_codename}-security";
};
Unattended-Upgrade::AutoFixInterruptedDpkg "true";
Unattended-Upgrade::Remove-Unused-Dependencies "true";
Unattended-Upgrade::Automatic-Reboot "false";
```

## Ressources Additionnelles

### Documentation Officielle

::card-group
  ::card
  ---
  title: Ubuntu Server Guide
  icon: i-heroicons-book-open
  to: https://ubuntu.com/server/docs
  target: _blank
  ---
  Documentation officielle compl√®te d'Ubuntu Server
  ::
  
  ::card
  ---
  title: OpenSSH Manual
  icon: i-heroicons-document-text
  to: https://www.openssh.com/manual.html
  target: _blank
  ---
  Manuel de r√©f√©rence OpenSSH
  ::
  
  ::card
  ---
  title: OVH - S√©curit√© VPS
  icon: i-heroicons-shield-check
  to: https://help.ovhcloud.com/csm/fr-vps-security-tips?id=kb_article_view&sysparm_article=KB0047708
  target: _blank
  ---
  Conseils de s√©curit√© pour VPS OVH
  ::
::

### Tutoriels et Guides

- [Commandes Linux Essentielles](https://www.hostinger.fr/tutoriels/commandes-linux) - Guide complet des commandes Linux
- [DigitalOcean Ubuntu Security](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu) - Configuration UFW d√©taill√©e
- [Fail2Ban Guide](https://www.fail2ban.org/wiki/index.php/Main_Page) - Documentation officielle Fail2Ban

### Outils de S√©curit√©

- **Lynis** : Outil d'audit de s√©curit√© pour syst√®mes Unix/Linux
- **UFW** : Uncomplicated Firewall, interface simplifi√©e pour iptables
- **Fail2Ban** : Pr√©vention d'intrusion par bannissement d'IP
- **rkhunter** : D√©tecteur de rootkits et malwares
- **ClamAV** : Antivirus open-source pour Linux

## Checklist Post-Installation

::callout{icon="i-heroicons-check-circle" color="green"}
#summary
Pre-Publication Checklist

#content
- [ ] Syst√®me mis √† jour (`apt update && apt upgrade`)
- [ ] Configuration clavier et locales
- [ ] Utilisateur sudo cr√©√© et test√©
- [ ] Login root SSH d√©sactiv√©
- [ ] Port SSH modifi√© et test√©
- [ ] Authentification par cl√© SSH configur√©e
- [ ] Authentification par mot de passe SSH d√©sactiv√©e
- [ ] Firewall UFW configur√© et actif
- [ ] Fail2Ban install√© et configur√©
- [ ] Mises √† jour automatiques activ√©es
- [ ] Sauvegardes configur√©es
- [ ] Monitoring des logs en place
- [ ] Configuration document√©e dans un endroit s√©curis√©
::

## Conclusion

La s√©curisation d'un serveur Ubuntu est un processus continu qui commence d√®s les premi√®res minutes apr√®s le provisionnement. En suivant ce guide, vous √©tablissez une base solide qui prot√®ge contre les attaques les plus courantes.

N'oubliez pas que la s√©curit√© est une strat√©gie en couches : aucune mesure unique n'est infaillible, mais leur combinaison cr√©e une d√©fense robuste. Restez vigilant, surveillez vos logs, et maintenez votre syst√®me √† jour.
